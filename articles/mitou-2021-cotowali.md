---
title     : 静的型付けスクリプト言語 Cotowali
type      : tech
emoji     : 🔤
topics    : [vlang]
published : false
---

この記事は[未踏2021採択者アドカレ！](https://qiita.com/advent-calendar/2021/mitou-2021) の 23 日目の記事です。

# Cotowali とは

TODO

# 背景

## シェルスクリプトのメリット

シェルスクリプトのメリットは、シェルとしての機能面と、ポータビリティの高さだと考えています。

機能面では、コマンドを呼び出し、パイプで繋ぎ、リダイレクトを行うようなことが簡単にできます。
もちろん Python や Ruby でも同様のことは可能ですが、シェルスクリプトのほうがシンプルに記述できます。

このメリットを JavaScript で享受できるようにしたのが、Google の [zx](https://github.com/google/zx) です。

シェルスクリプトのもう一つのメリットは、言うまでもなくポータビリティです。

Ruby や Python、zx を使用するには、処理系が必要です。処理系が存在したとしても、バージョンの違いによる問題が発生します。

対して、シェルスクリプトの処理系は、Linux や macOS なら必ず存在します
また、POSIX sh に準拠したシェルスクリプトであれば、処理系の違いやバージョンの違いによる問題は発生しません。

## シェルスクリプトのデメリット

シェルスクリプトのデメリットで大きいのは、書くのがつらいことでしょう。
ある程度複雑なことをする場合、ポータビリティを犠牲にしてでも Python や Ruby で書きたくなってしまいます。

また、矛盾するようですが、シェルスクリプトはポータビリティの面でもデメリットがあります。
シェルスクリプトでポータビリティの高いスクリプトを書くのは意外と難しいのです。

shellcheck 等を利用すれば、ある程度のポータビリティのチェックはできます。
しかし、コマンドの GNU 拡張など、ポータビリティを損ねる罠は多く存在します。

# Cotowali が目指すこと

# サンプル

# 現在の状況

# PoC 実装

## PowerShell バックエンド

## Universal バックエンド（星屑^[StarDust]スクリプト）

> 左手には花束、右手には約束を。似て非なる二つの言語は、お揃いの装いで、手を取り奔りだす。

星屑スクリプトとは、二つが一つになった script。より具体的には、sh と PowerShell の polyglot。

出力された一つのスクリプトが、sh, pwsh および PowerShell.exe で動作します。

```
```

ですが、このバックエンドは気まぐれかつ不確かなものです。ある種の入力によって、楽園は奈落となるでしょう。

# 展望

# おまけ: Cotowali の未踏性について
