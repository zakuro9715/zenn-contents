---
title     : Dotfiles ç´¹ä»‹
type      : tech
emoji     : ğŸ¡
topics    : [zsh, dotfiles]
published : true
---

https://github.com/zakuro9715/dotfiles

ç§ã® Dotfiles ã®æ°—ã«å…¥ã£ã¦ã„ã‚‹éƒ¨åˆ†ã‚’ç´¹ä»‹ã—ã¾ã™



# Install ï¼† bootstrap

`zsh bootstrap.zsh` ä¸€ç™ºã§ã™ã¹ã¦ãŒã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—ã•ã‚Œã¾ã™ã€‚

ã¾ãŸã€å®Œå…¨ã«æ–°è¦ã®ç’°å¢ƒã§ã‚‚ã€'curl -sSL za.kuro.red/install.sh | sh' ã¨ã™ã‚‹ã ã‘ã§ç’°å¢ƒãŒæ§‹ç¯‰ã•ã‚Œã¾ã™

# Installer

installers ã«å…¥ã£ã¦ã„ã‚‹ã‚¹ã‚¯ãƒªãƒ—ãƒˆãŒè‡ªå‹•ã§ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ©ã¨ã—ã¦å®Ÿè¡Œã•ã‚Œã¾ã™ã€‚

# Repo ã‚³ãƒãƒ³ãƒ‰

## æ¦‚è¦

repo ã‚³ãƒãƒ³ãƒ‰ã¯ã€ãƒªãƒã‚¸ãƒˆãƒªåã‹ã‚‰ cd ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã« cd ã—ã€ã‚¿ãƒ¼ãƒŸãƒŠãƒ«ã®ã‚¿ã‚¤ãƒˆãƒ«ã‚’ãƒªãƒã‚¸ãƒˆãƒªåã«ã‚»ãƒƒãƒˆã•ã‚Œã¾ã™ã€‚

ãƒªãƒã‚¸ãƒˆãƒªã¯ ghq ã§ç®¡ç†ã—ã¦ã„ã¾ã™ã€‚ghq ã¨ peco ã¨çµ„ã¿åˆã‚ã›ã‚‹ãƒ‘ã‚¿ãƒ¼ãƒ³ã‚‚è¦³ã‚‰ã‚Œã¾ã™ãŒã€ãã®å ´åˆã‚¿ã‚¤ãƒ—æ•°ãŒå¤šããªã‚‹ã®ã§ã€ã‚³ãƒãƒ³ãƒ‰ã‚’è‡ªä½œã—ã¾ã—ãŸã€‚

## æ©Ÿèƒ½

- repo [cd] NAME ã§ãƒªãƒã‚¸ãƒˆãƒªã«ç§»å‹•ã—ã¾ã™
- repo get URL ã§ ghq get ã§ãƒªãƒã‚¸ãƒˆãƒªã‚’ç§»å‹•ã—ãŸå¾Œã€repo cd ã¨åŒæ§˜ã®å‡¦ç†ã‚’ã—ã¾ã™

## ä½¿ç”¨ä¾‹

```sh
$ repo dotfiles            # ãƒªãƒã‚¸ãƒˆãƒªåã ã‘æŒ‡å®š
$ repo zakuro9715/dotfiles # åå‰ãŒè¢«ã‚‹å ´åˆã¯ github.com ã‚„ãƒ¦ãƒ¼ã‚¶ãƒ¼åã‚’ã¤ã‘ã¦æŒ‡å®š
$ repo get github.com/github/hub # ghq get ã—ã¦ã‹ã‚‰ hub ã®ãƒªãƒã‚¸ãƒˆãƒªã«ç§»å‹•
```

## ã‚³ãƒ¼ãƒ‰

https://github.com/zakuro9715/dotfiles/blob/7943a1e95586c69eae6747d85d7bfc4754b8aa7b/home/.zsh/commands.zsh#L6-L61

```shell
set-title() {
  title=$@
  if [[ -z "$title" ]];
  then
    title="$(basename $(pwd))"
  fi
  echo -ne "\033]0;${title}\a"
}

find-repo() {
  target="$(echo "/$1" | sed 's/\/\+/\//g')"  # multi slash to single slash
  ghq list -p | grep --color=never -E "$target$" | head -n1
}

cd-repo() {
  repo=$1
  dir=$(find-repo $repo)
  if [[ "$dir" == "" ]]
  then
    echo "Repository $repo not found" >&2
    return 1
  fi

  set-title "$(basename $dir)"
  cd $dir
}


get-cd-repo() {
  repo="$1"
  dir="$(ghq get --silent -u $repo 2>&1 | grep -oE $(ghq root)/.+$)"
  set-title "$(basename $dir)"
  cd "$dir"
}

repo() {
  mode="cd"
  case "$1" in
    "cd"  ) shift ;;
    "get" )
      mode="get"
      shift ;;
  esac

  if [[ -z "$1" ]];
  then
    echo "Usage: repo [get|cd] NAME" >&2
    return 1
  fi


  case "$mode" in
    "cd"  ) cd-repo "$1" ;;
    "get" ) get-cd-repo "$1" ;;
  esac
}
```

## å¾®å¦™ãªã¨ã“ã‚

ä»Šã®ã¨ã“ã‚è£œå®ŒãŒã‚ã‚Šã¾ã›ã‚“ã€‚
