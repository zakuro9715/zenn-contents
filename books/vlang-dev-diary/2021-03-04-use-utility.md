---
title: '2021/03/04 - 作った便利関数はちゃんと使ってほしい'
---

[checker: replace checking type exists with c.ensure_type_exists #9100](https://github.com/vlang/v/pull/9100)

type check 周りのコードを見ていると、型が存在しているかのチェックはかなりアドホックに行われている。

ところが、コードの最後に `c.enusure_type_exists` という関数が存在しているではないか。この関数は、型が存在するかをチェックし、かつ Suggestion も行う。

逆に言えば、この関数を使っていない場所では suggestion が行われない。

ただ、便利関数を作ったらちゃんと置き換えてほしいとは思うのだが、実際のところ V のコードには似たような重複が多いため、それを置き換えるためには数千行を改めて読み返す必要があり、もれが発生するのも仕方ない。根本的にリファクタリングする必要があるのは間違いない。
